USE ABD_03361_A_SARAH_NARAYAMY;

-- CRIAR TABELA DE CLIENTE

CREATE TABLE CLIENTE (
 	ID_CLIENTE INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(50),
    SOBRENOME VARCHAR(50),
    TELEFONE VARCHAR(20),
    EMAIL VARCHAR(100)
 );
 
 -- CRIAR TABELA DE AUTOMOVEL

CREATE TABLE AUTOMOVEL (
 	ID_AUTOMOVEL INT AUTO_INCREMENT PRIMARY KEY,
    MARCA VARCHAR(50),
    MODELO VARCHAR(50),
    TIPO VARCHAR(20)
 );
 
  -- CRIAR TABELA DE DATA LOCACAO
  
 CREATE TABLE DATA_LOCACAO (
 	ID_DATALOCACAO INT AUTO_INCREMENT PRIMARY KEY,
    ID_CLIENTE INT,
    FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
    ID_AUTOMOVEL INT,
    FOREIGN KEY (ID_AUTOMOVEL) REFERENCES AUTOMOVEL(ID_AUTOMOVEL),    
    DATA_INICIO_LOCACAO DATE,
    DATA_FINAL_LOCACAO DATE
 );
 
 -- POPULANDO AS TABELAS
 
INSERT INTO CLIENTE (NOME, SOBRENOME, TELEFONE, EMAIL)
VALUES
('JOÃO', 'SILVA', '31998887766', 'JOAO.SILVA@EMAIL.COM'),
('MARIA', 'SOUZA', '21997776655', 'MARIA.SOUZA@EMAIL.COM'),
('CARLOS', 'PEREIRA', '11996655443', 'CARLOS.PEREIRA@EMAIL.COM'),
('ANA', 'MOURA', '31995544332', 'ANA.MOURA@EMAIL.COM'),
('FERNANDO', 'ALMEIDA', '21994433221', 'FERNANDO.ALMEIDA@EMAIL.COM'),
('LUANA', 'CASTRO', '11992221111', 'LUANA.CASTRO@EMAIL.COM'),
('PAULO', 'RAMOS', '31991112222', 'PAULO.RAMOS@EMAIL.COM'),
('ISABELA', 'FERREIRA', '21990003344', 'ISABELA.FERREIRA@EMAIL.COM'),
('RODRIGO', 'LIMA', '31998880000', 'RODRIGO.LIMA@EMAIL.COM'),
('CARLA', 'MENEZES', '21997770011', 'CARLA.MENEZES@EMAIL.COM');

INSERT INTO AUTOMOVEL (MARCA, MODELO, TIPO)
VALUES
('FIAT', 'ARGO', 'HATCH'),
('CHEVROLET', 'ONIX', 'SEDAN'),
('VOLKSWAGEN', 'GOL', 'HATCH'),
('TOYOTA', 'COROLLA', 'SEDAN'),
('JEEP', 'RENEGADE', 'SUV'),('HONDA', 'CIVIC', 'SEDAN'),
('HYUNDAI', 'HB20', 'HATCH'),
('NISSAN', 'KICKS', 'SUV'),
('PEUGEOT', '208', 'HATCH'),
('FORD', 'ECOSPORT', 'SUV');

INSERT INTO DATA_LOCACAO (ID_CLIENTE, ID_AUTOMOVEL, DATA_INICIO_LOCACAO, DATA_FINAL_LOCACAO)
VALUES
(1, 3, '2025-09-01', '2025-09-05'),
(2, 1, '2025-09-10', '2025-09-15'),
(3, 5, '2025-09-20', '2025-09-25'),
(4, 2, '2025-09-22', '2025-09-27'),
(5, 4, '2025-09-25', '2025-09-30'),
(6, 8, '2025-10-01', '2025-10-05'),
(7, 6, '2025-10-03', '2025-10-08'),
(8, 10, '2025-10-05', '2025-10-09'),
(9, 9, '2025-10-07', '2025-10-12'),
(10, 7, '2025-10-08', '2025-10-13');

-- CONSULTAR TODOS OS CLIENTES CADASTRADOS

SELECT * FROM CLIENTE;

-- CONSULTAR TODOS OS AUTOMOVEIS DISPONIVEIS

SELECT * FROM AUTOMOVEL;

-- CONSULTAR INFORMAÇÕES SOBRE O CLIENTE E O AUTOMOVEL LOCADO, INCLUINDO A DATA DE INICIO E FIM DA LOCAÇÃO,
-- A MARCA E O MODELO DO AUTOMOVEL

SELECT 
    CONCAT(C.NOME, ' ', C.SOBRENOME) AS CLIENTE,
    A.MARCA,
    A.MODELO,
    D.DATA_INICIO_LOCACAO,
    D.DATA_FINAL_LOCACAO
FROM DATA_LOCACAO D
JOIN CLIENTE C ON D.ID_CLIENTE = C.ID_CLIENTE
JOIN AUTOMOVEL A ON D.ID_AUTOMOVEL = A.ID_AUTOMOVEL;

-- CONSULTAR INFORMAÇÕES SOBRE OS AUTOMOVEIS LOCADOS EM UMA DATA ESPECIFICA, INCLUINDO A MARCA E O MODELO

SELECT 
    CONCAT(A.MARCA, ' ', A.MODELO) AS MARCA_MODELO,    
    D.DATA_INICIO_LOCACAO,
    D.DATA_FINAL_LOCACAO
FROM DATA_LOCACAO D
JOIN AUTOMOVEL A ON D.ID_AUTOMOVEL = A.ID_AUTOMOVEL
WHERE '2025-10-05' BETWEEN D.DATA_INICIO_LOCACAO AND D.DATA_FINAL_LOCACAO;


 
 